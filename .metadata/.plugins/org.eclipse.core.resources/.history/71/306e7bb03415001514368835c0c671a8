package de.uni_hamburg.informatik.swt.se2.kino.werkzeuge.bezahlung;

import javax.swing.JFormattedTextField;
import javax.swing.JFrame;
import javax.swing.JButton;
import javax.swing.JTextPane;
import javax.swing.JTextField;
import javax.swing.SpinnerNumberModel;

import de.uni_hamburg.informatik.swt.se2.kino.fachwerte.Geld;

import java.awt.SystemColor;
import java.awt.BorderLayout;
import java.text.NumberFormat;

import javax.swing.Box;
import javax.swing.JSpinner;

public class BezahlWerkzeugUI
{
    private JFrame _frame;
    private JFormattedTextField _textField;
    private JButton _ok;
    private JButton _abbrechen;
    private JTextPane _zuZahlenderPreis;
    private JTextPane _rueckzugebenderPreis;
    private Box verticalBox;
    private Box horizontalBox;
    private Box verticalBox_1;
    private JSpinner spinner;

    public BezahlWerkzeugUI(Geld preis)
    {
        _frame = new JFrame("Bezahlung");
        _frame.setResizable(false);
        _frame.setAlwaysOnTop(true);
        _frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        _frame.getContentPane()
            .setLayout(new BorderLayout(0, 0));

        verticalBox_1 = Box.createVerticalBox();
        _frame.getContentPane()
            .add(verticalBox_1, BorderLayout.NORTH);

        verticalBox = Box.createVerticalBox();
        verticalBox_1.add(verticalBox);

        _zuZahlenderPreis = new JTextPane();
        verticalBox.add(_zuZahlenderPreis);
        _zuZahlenderPreis.setBackground(SystemColor.window);
        _zuZahlenderPreis.setText("Zu bezahlen: " + preis);

        SpinnerNumberModel numberModel = new SpinnerNumberModel(
                new Integer(0), // value
                new Integer(0), // min
                new Integer(50000), // max
                new Integer(100) // step
        );
        spinner = new JSpinner(numberModel);
        verticalBox.add(spinner);

        _textField = new JFormattedTextField(NumberFormat.getCurrencyInstance());
        verticalBox.add(_textField);
        _textField.setColumns(10);

        _rueckzugebenderPreis = new JTextPane();
        verticalBox.add(_rueckzugebenderPreis);
        _rueckzugebenderPreis.setBackground(SystemColor.window);
        _rueckzugebenderPreis.setText("Betrag nicht ausreichend");

        horizontalBox = Box.createHorizontalBox();
        verticalBox_1.add(horizontalBox);

        _ok = new JButton("OK");
        horizontalBox.add(_ok);
        _ok.setEnabled(false);

        _abbrechen = new JButton("Abbrechen");
        horizontalBox.add(_abbrechen);
    }

    public void setRueckzugebenderPreis(Geld preis)
    {
        if (preis.signum() != -1)
        {
            _rueckzugebenderPreis.setText("Rueckgabe: " + preis);
        }
        else
        {
            _rueckzugebenderPreis.setText("Betrag nicht ausreichend");
        }
    }

    public JFrame getFrame()
    {
        return _frame;
    }

    public JTextField getTextField()
    {
        return _textField;
    }

    public JButton getOKButton()
    {
        return _ok;
    }

    public JButton getAbbrechenButton()
    {
        return _abbrechen;
    }

    public void close()
    {
        _frame.dispose();
    }

    public void zeigeFenster()
    {
        _frame.setSize(200, 120);
        _frame.setLocationRelativeTo(null);
        _frame.setVisible(true);
    }
}
